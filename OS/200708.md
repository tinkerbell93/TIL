# OS lesson

## 스케쥴러

### FIFO 스케쥴러

First In First Out는 큐를 만들었다고 생각한다. (선입선출)

**요청받은 프로세스를 갖고와서 처음 큐에 들어온 순서대로 실행**

### SJF 스케쥴러

Shorest Job First 

**요청받은 프로세스를 갖고와서 짧은시간 기반으로 sorting하여 실행**

RealTime OS : 응용 프로그램 실행 시간을 정확히 알 수 있음 - 반도체

하지만 일반적인 OS는 불가능

> **OS 종류**
>
> - RTOS
>
> - GPOS - 일반적인 OS



### 우선순위 기반 스케쥴러

**요청받은 프로세스를 갖고와서 우선순위 기반으로 sorting하여 실행**

> **우선순위는 어떻게 매길까?**
>
> - 정적 우선순위
> - 동적 우선순위



### Round Robbing 스케쥴러

FIFO에서 시분할 시스템을 지원하여 해당 시간보다 적을경우 다시 마지막으로 큐에 삽입한다. 프로세스가 끝날때까지 반복한다.



### 프로세스 상태 기반 스케쥴러

프로세스마다 상태를 지정

멀티 프로그래밍, 시분할 시스템 지원하는 스케쥴러



## 프로세스

### 프로세스 구조

exe: 실행파일

4가지의 영역으로 나눠져있음

- text(code): 코드

- data: 변수/초기화된 데이터 

- stack: 임시 데이터(함수 호출, 로컬 변수등)

  팝업창을 생각

  함수가 실행되면 스택에 해당 함수 정보가 쌓인다. 스택은 함수를 실행 하기 위해 생겼다. 함수가 몇 번 실행될지 모르기 때문에 공간을 비워둔 상태이다.

- heap: 코드에서 동적으로 만들어지는 데이터

  메모리를 매니지먼트하는 언어인 자바, 자바스크립트는 heap을 보지 못한다. 



### 프로세스와 컴퓨터 구조

- **PC(Program Counter) + SP(Stack Pointer)**

PC에 있는 값을 가지고 메모리의 한 위치를 가리킨다 

CPU는 PC에 있는 주소값을 가져와서 실행한다. 실행하는 PC는 1을 더해준다. 

컴퓨터를 실행시키려면 PC, SP면 있으면 된다.



## 컨텍스트 스위칭

문맥 교환

CPU에서 실행할 컨텍스트를 교체해준다는 의미를 갖음

PCB(Process Control Block)



### 컨텍스트 스위칭 세부 동작

1. 실행 중지할 프로세스 정보를 해당 프로세스의 PCB에 업데이트해서, 메인 메모리에 저장
2. 다음 실행할 프로세스 정보를 메인 메모리에 있는 해당 PCB정보(PC, SP)를 CPU의 레지스터에 넣고 실행



## 프로세스간 커뮤니케이션

InterProcess Communication

실행속도를 높이기 위해서 동일한 일을 하는 여러 프로그램을 띄운다. 여러 프로세스의 데이터들을 공유해야하는데 프로세스간의 주소 접근이 안되는데 그 것을 해결하기 위해 IPC가 있다.



## Thread (스레드)

### Thread

함수

프로세스 안에서 스레드가 생성되고 동작한다.

스레드간 통신은 Code, data, Heap을 공유한다.

### Multi Thread

Code, data, Heap을 공유한다.

### 멀티 프로세싱과 Thread

스레드 동기화 문제

10000이하일땐 짧은 시간이라 스케쥴링이 실행되지 않지만 100000일때는 스레드가 교체되면서 실행되면서 언제 스레드가 실행될지 몰라 결과값이 다르다. 

### 해결

- Mutual exclusion (상호 배제)

  중간부분을 락킹(locking)을 하여 한 스레드만 제어권을 줌

  - 임계 자원(critcal resource)

  - 임계 영역(critcal section)

    자원 == 데이터

  성능이 떨어지지 않을까? 스레드는 동시에 작업하는 목표가 있는데? 

  임계영역은 일정부분이기 때문에 스레드를 그냥 사용할 때 보단 나음

### 멀티 프로세스와 멀티 Thread

모든 운영체제에서 지원

### Thread 장점 

1. 사용자에 대한 응답성 향상
2. 자원 공유 효율
3. 작업이 분리되어 코드가 간결

### Thread 단점

- 멀티 스레드 

  하나의 스레드가 날아가면 끝남

- 멀티 프로세스

  하나의 프로세스가 날아가도 상관없이 실행

- 스레드를 많이 생성하면 Context Switching이 많이 일어나 성능 저하

- 동기화 이슈

### Thread 동기화

#### *Mutex와 Semaphore(세마포어)*

- Mutex: 

- Semaphore: 임계구역에 여러 스레드가 들어갈 수 있음

#### deadlock(교착상태)란?

두개의 임계 영역이 겹치면서 상대방의 작업이 끝나기만을 기다리는 상태

#### starvation(기아상태)란?

우선순위가 너무 낮아 한번도 실행을 하지 못한 상태



---

I/O

웹워커

---



1. 프로세스 구조에 대해 가능한 상세하게 설명해주세요.

   프로세스 구조는 코드, 데이터, stack, heap으로 구성되어있으며 코드는 프로그램이 실행될 바이너리 코드들의 영역이고 데이터는 전역 변수와 초기화된 변수들의 데이터의 영역이다. stack은 함수와 지역변수등 임시 데이터의 영역이며 heap은 코드에서 동적으로 생성되는 데이터들을 위한 영역이다. 

2. 컨텍스트 스위칭에 대해 가능한 상세하게 설명해주세요.

   CPU에 실행할 프로세스를 교체하는 기술

   멀티태스킹을 스위칭할때 

3. 프로세스간에는 어떻게 통신하는지, 쓰레드와 비교해서 가능한 상세하게 설명해주세요.

4. 프로세스와 쓰레드의 차이점에 대해 설명해주세요.

5. 언제 멀티 프로세스를 사용하고, 언제 멀티 쓰레드를 써야하는지 가능한 구체적으로 설명해주세요.

   (규모가 있는 프로그램이 있는지 질문 - 성능을 높이기 위해 멀티 프로세스, 쓰레드 사용 : 동시에 여러명이 접속했을때 더 많은 접속자가 원할하게 웹을 사용하기 위함) 

   개인적인 생각이라는 것을 강조, 팩트가 아님

6. 쓰레드 동기화란 무엇이며 왜 사용해야하는지 예를 들어 설명해주세요.

7. 프로세스간에는 어떻게 통신하는지 가능한 상세하게 설명해주세요.

   (스레드를 위한 과정)

8. 뮤텍스와 세마포어의 차이점에 대해 간략히 설명해주세요.

9. 가상 메모리와 페이징 시스템에 대해 구체적으로 설명해주세요.

10. 요구 페이징과 페이지 폴트에 대해 구체적으로 설명해주세요.

11. MMU와 TLB에 대해 구체적으로 설명해주세요.







